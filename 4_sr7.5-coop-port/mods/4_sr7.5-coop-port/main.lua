-- name:\\#ffff40\\Star Revenge 7.5
-- description: Star Revenge 7.5: Kedowser's Return is a ROM hack made by BroDute and is an extension of Star Revenge 7: Park of Time. It has 131 stars and it also reuses the concept of badges, working the same way they did in the previous hack.\n\nPorted by BlackJoystick\n\nBadges API by flipflop_bell and wereyoshi
-- incompatible: romhack

gLevelValues.entryLevel = LEVEL_CASTLE_GROUNDS

camera_set_use_course_specific_settings(false)
gServerSettings.skipIntro = 1
gServerSettings.stayInLevelAfterStar = false

smlua_audio_utils_replace_sequence(0x01, 0x19, 75, "01_Seq_custom")
smlua_audio_utils_replace_sequence(0x02, 0x11, 75, "02_Seq_custom")
smlua_audio_utils_replace_sequence(0x03, 0x25, 75, "03_Seq_custom")
smlua_audio_utils_replace_sequence(0x04, 0x25, 75, "04_Seq_custom")
smlua_audio_utils_replace_sequence(0x05, 0x11, 75, "05_Seq_custom")
smlua_audio_utils_replace_sequence(0x06, 0x11, 75, "06_Seq_custom")
smlua_audio_utils_replace_sequence(0x07, 0x12, 75, "07_Seq_custom")
smlua_audio_utils_replace_sequence(0x08, 0x25, 75, "Orange")
smlua_audio_utils_replace_sequence(0x09, 0x25, 75, "Little_Princess")
smlua_audio_utils_replace_sequence(0x0B, 0x14, 75, "0B_Seq_custom")
smlua_audio_utils_replace_sequence(0x0D, 0x25, 75, "0D_Seq_custom")
smlua_audio_utils_replace_sequence(0x0E, 0x11, 75, "0E_Seq_custom")
smlua_audio_utils_replace_sequence(0x0F, 0x18, 75, "0F_Seq_custom")
smlua_audio_utils_replace_sequence(0x10, 0x12, 75, "10_Seq_custom")
smlua_audio_utils_replace_sequence(0x12, 0x1F, 75, "12_Seq_custom")
smlua_audio_utils_replace_sequence(0x13, 0x21, 75, "GhostRMerry-Go-Round")
smlua_audio_utils_replace_sequence(0x14, 0x1A, 75, "14_Seq_custom")
smlua_audio_utils_replace_sequence(0x15, 0x0E, 75, "15_Seq_custom")
smlua_audio_utils_replace_sequence(0x16, 0x1A, 75, "16_Seq_custom")
smlua_audio_utils_replace_sequence(0x17, 0x1A, 75, "17_Seq_custom")
smlua_audio_utils_replace_sequence(0x19, 0x12, 75, "Final")
smlua_audio_utils_replace_sequence(0x1A, 0x25, 75, "StaffcCredits")
smlua_audio_utils_replace_sequence(0x1B, 0x14, 75, "1B_Seq_custom")
smlua_audio_utils_replace_sequence(0x1C, 0x20, 75, "1C_Seq_custom")
smlua_audio_utils_replace_sequence(0x1D, 0x1E, 75, "1D_Seq_custom")
smlua_audio_utils_replace_sequence(0x1E, 0x1B, 75, "1E_Seq_custom")
smlua_audio_utils_replace_sequence(0x1F, 0x1A, 75, "1F_Seq_custom")
smlua_audio_utils_replace_sequence(0x20, 0x23, 75, "20_Seq_custom")
smlua_audio_utils_replace_sequence(0x21, 0x25, 75, "21_Seq_custom")
smlua_audio_utils_replace_sequence(0x22, 0x1B, 75, "Lakitu_Appears")
smlua_audio_utils_replace_sequence(0x23, 0x0C, 75, "23_Seq_custom")
smlua_audio_utils_replace_sequence(0x24, 0x25, 75, "24_Seq_custom")
smlua_audio_utils_replace_sequence(0x25, 0x11, 75, "Kirby")
smlua_audio_utils_replace_sequence(0x26, 0x25, 75, "SMB3")
smlua_audio_utils_replace_sequence(0x27, 0x11, 75, "27_Seq_custom")
smlua_audio_utils_replace_sequence(0x28, 0x25, 75, "28_Seq_custom")
smlua_audio_utils_replace_sequence(0x29, 0x1A, 75, "29_Seq_custom")
smlua_audio_utils_replace_sequence(0x2A, 0x25, 75, "2A_Seq_custom")
smlua_audio_utils_replace_sequence(0x2B, 0x25, 75, "2B_Seq_custom")
smlua_audio_utils_replace_sequence(0x2C, 0x25, 75, "Dullahan_under_the_w")
smlua_audio_utils_replace_sequence(0x2D, 0x19, 75, "2D_Seq_custom")
smlua_audio_utils_replace_sequence(0x2E, 0x15, 75, "DryDryRuins")
smlua_audio_utils_replace_sequence(0x2F, 0x19, 75, "DesertBoss")
smlua_audio_utils_replace_sequence(0x30, 0x25, 75, "30_Seq_custom")
smlua_audio_utils_replace_sequence(0x31, 0x1A, 75, "lorule3")
smlua_audio_utils_replace_sequence(0x32, 0x25, 75, "32_Seq_custom")
smlua_audio_utils_replace_sequence(0x33, 0x25, 75, "33_Seq_custom")
smlua_audio_utils_replace_sequence(0x34, 0x25, 75, "34_Seq_custom")
smlua_audio_utils_replace_sequence(0x35, 0x25, 75, "SolarSect")
smlua_audio_utils_replace_sequence(0x36, 0x25, 75, "36_Seq_custom")
smlua_audio_utils_replace_sequence(0x37, 0x25, 75, "CustomMusic521")
smlua_audio_utils_replace_sequence(0x38, 0x25, 75, "38_Seq_custom")
smlua_audio_utils_replace_sequence(0x39, 0x11, 75, "39_Seq_custom")
smlua_audio_utils_replace_sequence(0x3A, 0x25, 75, "3A_Seq_custom")
smlua_audio_utils_replace_sequence(0x3B, 0x25, 75, "3B_Seq_custom")
smlua_audio_utils_replace_sequence(0x3C, 0x25, 75, "3C_Seq_custom")
smlua_audio_utils_replace_sequence(0x3D, 0x25, 75, "CustomMusic27")
smlua_audio_utils_replace_sequence(0x3E, 0x25, 75, "3E_Seq_custom")
smlua_audio_utils_replace_sequence(0x3F, 0x25, 75, "3F_Seq_custom")
smlua_audio_utils_replace_sequence(0x40, 0x25, 75, "Musicc30")
smlua_audio_utils_replace_sequence(0x41, 0x11, 75, "Musicu31")
smlua_audio_utils_replace_sequence(0x42, 0x25, 75, "42_Seq_custom")
smlua_audio_utils_replace_sequence(0x43, 0x25, 75, "43_Seq_custom")
smlua_audio_utils_replace_sequence(0x44, 0x25, 75, "44_Seq_custom")
smlua_audio_utils_replace_sequence(0x45, 0x11, 75, "Musicu31")

vec3f_set(gLevelValues.starPositions.KoopaBobStarPos, -12432, -1359, 4000)
vec3f_set(gLevelValues.starPositions.KoopaThiStarPos, -8342, 1556, -8564)
vec3f_set(gLevelValues.starPositions.KingBobombStarPos, 0.0, 1950.0, 0.0)
vec3f_set(gLevelValues.starPositions.KingWhompStarPos, -1985.0, 1850.0, 0.0)
vec3f_set(gLevelValues.starPositions.EyerockStarPos, 31.0, 14.0, -295.0)
vec3f_set(gLevelValues.starPositions.BigBullyStarPos, 3700.0, 600.0, -5500.0)
vec3f_set(gLevelValues.starPositions.ChillBullyStarPos, 130.0, 1600.0, -4335.0)
vec3f_set(gLevelValues.starPositions.BigPiranhasStarPos, -6883.0, 280.0, -7746.0)
vec3f_set(gLevelValues.starPositions.TuxieMotherStarPos, 3167.0, -4300.0, 5108.0)
vec3f_set(gLevelValues.starPositions.WigglerStarPos, -3894.0, 1970.0, 787.0)
vec3f_set(gLevelValues.starPositions.PssSlideStarPos, 14678.0, -7651.0, -13375.0)
vec3f_set(gLevelValues.starPositions.RacingPenguinStarPos, -7339.0, -5700.0, -6774.0)
vec3f_set(gLevelValues.starPositions.TreasureChestStarPos, -1800.0, -2500.0, -1700.0)
vec3f_set(gLevelValues.starPositions.GhostHuntBooStarPos, 355.0, 1842.0, -2.0)
vec3f_set(gLevelValues.starPositions.KleptoStarPos, 355.0, 1842.0, -2.0)
vec3f_set(gLevelValues.starPositions.MerryGoRoundStarPos, -1600.0, -2100.0, 205.0)
vec3f_set(gLevelValues.starPositions.MrIStarPos, 6395.0, 213.0, 355.0)
vec3f_set(gLevelValues.starPositions.BalconyBooStarPos, 355.0, 1842.0, -2.0)
vec3f_set(gLevelValues.starPositions.BigBullyTrioStarPos, 0.0, -2222.0, 6532.0)

gBehaviorValues.trajectories.KoopaBobTrajectory            = get_trajectory('KoopaBoB_path')
gBehaviorValues.trajectories.KoopaThiTrajectory            = get_trajectory('KoopaTHI_path')
gBehaviorValues.trajectories.PlatformRrTrajectory          = get_trajectory('rr_seg7_trajectory_0702EC3C_RM2C_path')
gBehaviorValues.trajectories.PlatformRr2Trajectory         = get_trajectory('rr_seg7_trajectory_0702ECC0_RM2C_path')
gBehaviorValues.trajectories.PlatformCcmTrajectory         = get_trajectory('ccm_seg7_trajectory_0701669C_RM2C_path')
gBehaviorValues.trajectories.PlatformBitfsTrajectory       = get_trajectory('bitfs_seg7_trajectory_070159AC_RM2C_path')
gBehaviorValues.trajectories.PlatformHmcTrajectory         = get_trajectory('hmc_seg7_trajectory_0702B86C_RM2C_path')
gBehaviorValues.trajectories.PlatformLllTrajectory         = get_trajectory('lll_seg7_trajectory_0702856C_RM2C_path')
gBehaviorValues.trajectories.PlatformLll2Trajectory        = get_trajectory('lll_seg7_trajectory_07028660_RM2C_path')
gBehaviorValues.trajectories.PlatformRr3Trajectory         = get_trajectory('rr_seg7_trajectory_0702ED9C_RM2C_path')
gBehaviorValues.trajectories.PlatformRr4Trajectory         = get_trajectory('rr_seg7_trajectory_0702EEE0_RM2C_path')
gBehaviorValues.trajectories.RacingPenguinTrajectory       = get_trajectory('ccm_seg7_trajectory_penguin_race_RM2C_path')
gBehaviorValues.trajectories.BowlingBallBobTrajectory      = get_trajectory('ttc_bowling_ball_path')
gBehaviorValues.trajectories.BowlingBallThiLargeTrajectory = get_trajectory('rr_bowling_ball_path')

function inf_lives()
  gMarioStates[0].numLives = 100
end
hook_event(HOOK_UPDATE, inf_lives)

function heal(obj)
    nearest = nearest_mario_state_to_object(obj)
    if (((get_id_from_behavior(obj.behavior) == id_bhv1Up) or (get_id_from_behavior(obj.behavior) == id_bhv1upInPole)) and nearest.playerIndex == 0) then
        gMarioStates[0].health = 0x880
    end
end

hook_event(HOOK_ON_OBJECT_UNLOAD, heal)